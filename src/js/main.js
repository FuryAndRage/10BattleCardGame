const cardsArray = [
    {
        "card": "cardBack_blue1",
        "img": "./src/imgs/cardBack_blue1.png",
        "value": 0
    },
    {
        "card": "cardBack_blue2",
        "img": "./src/imgs/cardBack_blue2.png",
        "value": 0
    },
    {
        "card": "cardBack_blue3",
        "img": "./src/imgs/cardBack_blue3.png",
        "value": 0
    },
    {
        "card": "cardBack_blue4",
        "img": "./src/imgs/cardBack_blue4.png",
        "value": 0
    },
    {
        "card": "cardBack_blue5",
        "img": "./src/imgs/cardBack_blue5.png",
        "value": 0
    },
    {
        "card": "cardBack_green1",
        "img": "./src/imgs/cardBack_green1.png",
        "value": 0
    },
    {
        "card": "cardBack_green2",
        "img": "./src/imgs/cardBack_green2.png",
        "value": 0
    },
    {
        "card": "cardBack_green3",
        "img": "./src/imgs/cardBack_green3.png",
        "value": 0
    },
    {
        "card": "cardBack_green4",
        "img": "./src/imgs/cardBack_green4.png",
        "value": 0
    },
    {
        "card": "cardBack_green5",
        "img": "./src/imgs/cardBack_green5.png",
        "value": 0
    },
    {
        "card": "cardBack_red1",
        "img": "./src/imgs/cardBack_red1.png",
        "value": 0
    },
    {
        "card": "cardBack_red2",
        "img": "./src/imgs/cardBack_red2.png",
        "value": 0
    },
    {
        "card": "cardBack_red3",
        "img": "./src/imgs/cardBack_red3.png",
        "value": 0
    },
    {
        "card": "cardBack_red4",
        "img": "./src/imgs/cardBack_red4.png",
        "value": 0
    },
    {
        "card": "cardBack_red5",
        "img": "./src/imgs/cardBack_red5.png",
        "value": 0
    },
    {
        "card": "cardClubs10",
        "img": "./src/imgs/cardClubs10.png",
        "value": 10
    },
    {
        "card": "cardClubs2",
        "img": "./src/imgs/cardClubs2.png",
        "value": 2
    },
    {
        "card": "cardClubs3",
        "img": "./src/imgs/cardClubs3.png",
        "value": 3
    },
    {
        "card": "cardClubs4",
        "img": "./src/imgs/cardClubs4.png",
        "value": 4
    },
    {
        "card": "cardClubs5",
        "img": "./src/imgs/cardClubs5.png",
        "value": 5
    },
    {
        "card": "cardClubs6",
        "img": "./src/imgs/cardClubs6.png",
        "value": 6
    },
    {
        "card": "cardClubs7",
        "img": "./src/imgs/cardClubs7.png",
        "value": 7
    },
    {
        "card": "cardClubs8",
        "img": "./src/imgs/cardClubs8.png",
        "value": 8
    },
    {
        "card": "cardClubs9",
        "img": "./src/imgs/cardClubs9.png",
        "value": 9
    },
    {
        "card": "cardClubsA",
        "img": "./src/imgs/cardClubsA.png",
        "value": 1
    },
    {
        "card": "cardClubsJ",
        "img": "./src/imgs/cardClubsJ.png",
        "value": 11
    },
    {
        "card": "cardClubsK",
        "img": "./src/imgs/cardClubsK.png",
        "value": 13
    },
    {
        "card": "cardClubsQ",
        "img": "./src/imgs/cardClubsQ.png",
        "value": 12
    },
    {
        "card": "cardDiamonds10",
        "img": "./src/imgs/cardDiamonds10.png",
        "value": 10
    },
    {
        "card": "cardDiamonds2",
        "img": "./src/imgs/cardDiamonds2.png",
        "value": 2
    },
    {
        "card": "cardDiamonds3",
        "img": "./src/imgs/cardDiamonds3.png",
        "value": 3
    },
    {
        "card": "cardDiamonds4",
        "img": "./src/imgs/cardDiamonds4.png",
        "value": 4
    },
    {
        "card": "cardDiamonds5",
        "img": "./src/imgs/cardDiamonds5.png",
        "value": 5
    },
    {
        "card": "cardDiamonds6",
        "img": "./src/imgs/cardDiamonds6.png",
        "value": 6
    },
    {
        "card": "cardDiamonds7",
        "img": "./src/imgs/cardDiamonds7.png",
        "value": 7
    },
    {
        "card": "cardDiamonds8",
        "img": "./src/imgs/cardDiamonds8.png",
        "value": 8
    },
    {
        "card": "cardDiamonds9",
        "img": "./src/imgs/cardDiamonds9.png",
        "value": 9
    },
    {
        "card": "cardDiamondsA",
        "img": "./src/imgs/cardDiamondsA.png",
        "value": 1
    },
    {
        "card": "cardDiamondsJ",
        "img": "./src/imgs/cardDiamondsJ.png",
        "value": 11
    },
    {
        "card": "cardDiamondsK",
        "img": "./src/imgs/cardDiamondsK.png",
        "value": 13
    },
    {
        "card": "cardDiamondsQ",
        "img": "./src/imgs/cardDiamondsQ.png",
        "value": 12
    },
    {
        "card": "cardHearts10",
        "img": "./src/imgs/cardHearts10.png",
        "value": 10
    },
    {
        "card": "cardHearts2",
        "img": "./src/imgs/cardHearts2.png",
        "value": 2
    },
    {
        "card": "cardHearts3",
        "img": "./src/imgs/cardHearts3.png",
        "value": 3
    },
    {
        "card": "cardHearts4",
        "img": "./src/imgs/cardHearts4.png",
        "value": 4
    },
    {
        "card": "cardHearts5",
        "img": "./src/imgs/cardHearts5.png",
        "value": 5
    },
    {
        "card": "cardHearts6",
        "img": "./src/imgs/cardHearts6.png",
        "value": 6
    },
    {
        "card": "cardHearts7",
        "img": "./src/imgs/cardHearts7.png",
        "value": 7
    },
    {
        "card": "cardHearts8",
        "img": "./src/imgs/cardHearts8.png",
        "value": 8
    },
    {
        "card": "cardHearts9",
        "img": "./src/imgs/cardHearts9.png",
        "value": 9
    },
    {
        "card": "cardHeartsA",
        "img": "./src/imgs/cardHeartsA.png",
        "value": 1
    },
    {
        "card": "cardHeartsJ",
        "img": "./src/imgs/cardHeartsJ.png",
        "value": 11
    },
    {
        "card": "cardHeartsK",
        "img": "./src/imgs/cardHeartsK.png",
        "value": 13
    },
    {
        "card": "cardHeartsQ",
        "img": "./src/imgs/cardHeartsQ.png",
        "value": 12
    },
    {
        "card": "cardJoker",
        "img": "./src/imgs/cardJoker.png",
        "value": 1
    },
    {
        "card": "cardSpades10",
        "img": "./src/imgs/cardSpades10.png",
        "value": 10
    },
    {
        "card": "cardSpades2",
        "img": "./src/imgs/cardSpades2.png",
        "value": 2
    },
    {
        "card": "cardSpades3",
        "img": "./src/imgs/cardSpades3.png",
        "value": 3
    },
    {
        "card": "cardSpades4",
        "img": "./src/imgs/cardSpades4.png",
        "value": 4
    },
    {
        "card": "cardSpades5",
        "img": "./src/imgs/cardSpades5.png",
        "value": 5
    },
    {
        "card": "cardSpades6",
        "img": "./src/imgs/cardSpades6.png",
        "value": 6
    },
    {
        "card": "cardSpades7",
        "img": "./src/imgs/cardSpades7.png",
        "value": 7
    },
    {
        "card": "cardSpades8",
        "img": "./src/imgs/cardSpades8.png",
        "value": 8
    },
    {
        "card": "cardSpades9",
        "img": "./src/imgs/cardSpades9.png",
        "value": 9
    },
    {
        "card": "cardSpadesA",
        "img": "./src/imgs/cardSpadesA.png",
        "value": 1
    },
    {
        "card": "cardSpadesJ",
        "img": "./src/imgs/cardSpadesJ.png",
        "value": 11
    },
    {
        "card": "cardSpadesK",
        "img": "./src/imgs/cardSpadesK.png",
        "value": 13
    },
    {
        "card": "cardSpadesQ",
        "img": "./src/imgs/cardSpadesQ.png",
        "value": 12
    }
]

// cardsArray it is the code generated in python

const cardBack = [
    {
        "card": "cardBack_red3",
        "img": "./src/imgs/cardBack_red3.png",
        "value": 0
    },
]

// This will define the back image of our cards

cardsArray.sort(() => 0.5 - Math.random()) // Shuffle the cardArrays variable
  const app = Vue.createApp({
    data() {
      return {
        player_one_cards:[],
        player_two_cards:[],
        available_cards: [],
        cardBattle:[],
        cardBack: cardBack[0],
        draw:false,
        clickCard:true,
        gameOverMessage:"",
        playing: true
      }
    },
    methods:{
        initiateCards(){
            let available_cards_local = cardsArray
            while (this.player_one_cards.length < 10){
                this.available_cards = available_cards_local
                let rand = Math.round(Math.random() * available_cards_local.length - 1)
                let poped = available_cards_local[rand]
                if(poped && poped.value > 0 ){
                    let poped_local = this.available_cards.pop(poped)
                    if(poped_local.value > 0){
                        
                        this.player_one_cards.push(poped_local)
                    }
                }
                
            }
           
            while (this.player_two_cards.length < 10){
                this.available_cards = available_cards_local
                let rand = Math.round(Math.random() * available_cards_local.length - 1)
                let poped = available_cards_local[rand]
                if(poped && poped.value > 0 ){
                    let poped_local = this.available_cards.pop(poped)
                    if(poped_local.value > 0){
                        this.player_two_cards.push(poped_local)
                    }     
                }
            } 
        },

        playSound(src){
            const audio = new Audio()
            audio.src = src
            audio.play()
        },

        intervalClick(){
            this.clickCard = false
            setTimeout(()=>{
                this.clickCard = true
            }, 1500)
        },

        initiateBattle(card){
            if(!this.playing){
                return
            }
            if(this.clickCard){
                let playerOne = this.player_one_cards.splice(this.player_one_cards.indexOf(card),1)

                this.cardBattle.push(playerOne[0])
                this.playSound('./src/sound/cardPlace1.ogg')
                
                setTimeout(()=>{
                    let rand = Math.round(Math.random() * this.player_two_cards.length - 1)
                    let playerTwo = this.player_two_cards.splice(this.player_two_cards.indexOf(this.player_two_cards[rand]),1)
                    this.cardBattle.push(playerTwo[0])
                    this.playSound('./src/sound/cardPlace1.ogg')
                    setTimeout(()=>{
                        
                        this.compareCards()
                    },1000)
                },1000)
            }
            this.intervalClick()
            
        },
        compareCards(){
            if(!this.draw){
                console.log(this.cardBattle.length)
                if(this.cardBattle.length == 2){
                    if(this.cardBattle[0].value > this.cardBattle[1].value){
                        for(var item of this.cardBattle){
                            this.player_one_cards.push(item)
                            this.player_one_cards.sort(() => 0.5 - Math.random())
                            this.cardBattle = []
                            this.draw = false
                        }
                    }
                    else if(this.cardBattle[0].value < this.cardBattle[1].value){
                        for(var item of this.cardBattle){
                            this.player_two_cards.push(item)
                            this.player_two_cards.sort(() => 0.5 - Math.random())
                            this.cardBattle = []
                            this.draw = false
                        }
                    }
                    else{
                        this.draw = true
                    }
                }
            }
            else{
                
                let counter = 4
                if(this.cardBattle.length == counter){
                    if(this.cardBattle[counter-2].value > this.cardBattle[counter-1].value){
                        for(var item of this.cardBattle){
                            this.player_one_cards.push(item)
                            this.cardBattle = []
                            this.draw = false
                        }
                    }
                    if(this.cardBattle[counter-2].value < this.cardBattle[counter-1].value){
                        for(var item of this.cardBattle){
                            this.player_two_cards.push(item)
                            this.cardBattle = []
                            this.draw = false
                        }
                    }
                    if(this.cardBattle[counter-2].value == this.cardBattle[counter-1].value){
                        counter += 2
                        return
                    }
                    else{
                        this.draw = false
                        counter = 4
                    }

                }

            }
            this.playSound('./src/sound/cardSlide1.ogg')
            this.checkVictory()
        },
        checkVictory(){
            if(this.player_one_cards.length <=0){
                this.gameOverMessage = "Player Two Won"
                this.openModal()
                this.playing = false
            }
            if(this.player_two_cards.length <=0){
                this.gameOverMessage = "Player One Won"
                this.openModal()
                this.playing = false
            }
            
        },
        openModal(){
            var endgame  = new bootstrap.Modal(document.getElementById('endgame'))
            endgame.show()
            
        },
        resetGame(){
            this.player_one_cards = [],
            this.player_two_cards = [],
            this.available_cards =  [],
            this.cardBattle = [],
            this.draw = false,
            this.clickCard = true,
            this.gameOverMessage = "",
            this.playing =  true
            this.initiateCards()
        }
    },
    mounted(){
        this.initiateCards()
        
    }

  })
